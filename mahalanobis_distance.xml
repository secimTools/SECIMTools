<tool id="mahalanobisDistance" name="Mahalanobis Distance">
    <description>Use mahalanobis distance formula to create mahalanobis figure.</description>
    <requirements>
        <requirement type="python-module">numpy</requirement>
        <requirement type="python-module">pandas</requirement>
        <requirement type="python-module">matplotlib</requirement>
    </requirements>
    <command interpreter="python">mahalanobis_distance.py
        --input $input
        -o $output
    </command>
    <inputs>
        <param name="input" type="data" format="tabular" label="Wide Dataset"
               help="Input dataset in wide format and tab separated. If not tab separated see TIP below."/>
    </inputs>
    <outputs>
        <data format="png" name="output" label="Mahalanobis Figure"/>
    </outputs>
    <macros>
        <import>macros.xml</import>
    </macros>
    <help>

@TIP_AND_WARNING@

**Tool Description**

Mahalanobis Distance (MD; http://en.wikipedia.org/wiki/Mahalanobis_distance) is
a method used to measure the distance between a point and the center of a
distribution of points. For metabolomics, MD can be used to identify
multivariate outliers by comparing samples and looking for outlying features
after accounting for the correlation structure in the data.

        Mi=(Yi−Y¯)TS−1(Yi−Y¯)

        where:

        - Yi is the data for the ith row.
        - Y is the row of means.
        - S is the estimated covariance matrix for the data.


        This program calculates the Mahalanobis Distance, then generates a plot showing each feature (x-axis) and its
        distance (y-axis). A threshold is plotted where 95% of the data is located below the line.


**Input**

- One input dataset is required.

@WIDE@


--------------------------------------------------------------------------------

**Output**

- Mahalanobis figure in the format of a png.


    </help>
</tool>
